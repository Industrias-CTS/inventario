{"ast":null,"code":"import React,{useState}from'react';import{Box,Button,Paper,Typography,IconButton,Chip,Dialog,DialogTitle,DialogContent,DialogActions,TextField,Grid,MenuItem,Alert,Switch,FormControlLabel}from'@mui/material';import{DataGrid}from'@mui/x-data-grid';import{Edit,Delete,PersonAdd,Refresh}from'@mui/icons-material';import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import{useForm}from'react-hook-form';import{format}from'date-fns';import{usersService}from'../services/users.service';import{useAuth}from'../contexts/AuthContext';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Users(){var _errors$username,_errors$email,_errors$first_name,_errors$last_name,_errors$role,_errors$password,_errors$confirmPasswo;const[openDialog,setOpenDialog]=useState(false);const[selectedUser,setSelectedUser]=useState(null);const queryClient=useQueryClient();const{user:currentUser}=useAuth();const{data,isLoading,error}=useQuery({queryKey:['users'],queryFn:()=>usersService.getUsers()});const createMutation=useMutation({mutationFn:usersService.createUser,onSuccess:()=>{queryClient.invalidateQueries({queryKey:['users']});setOpenDialog(false);reset();}});const updateMutation=useMutation({mutationFn:_ref=>{let{id,data}=_ref;return usersService.updateUser(id,data);},onSuccess:()=>{queryClient.invalidateQueries({queryKey:['users']});setOpenDialog(false);setSelectedUser(null);reset();}});const deleteMutation=useMutation({mutationFn:usersService.deleteUser,onSuccess:()=>{queryClient.invalidateQueries({queryKey:['users']});}});const{register,handleSubmit,reset,setValue,formState:{errors}}=useForm();const columns=[{field:'username',headerName:'Usuario',width:120},{field:'email',headerName:'Email',flex:1,minWidth:200},{field:'full_name',headerName:'Nombre Completo',width:200,valueGetter:params=>`${params.row.first_name} ${params.row.last_name}`},{field:'role',headerName:'Rol',width:100,renderCell:params=>{const roleColors={admin:'error',user:'primary',viewer:'secondary'};return/*#__PURE__*/_jsx(Chip,{label:params.value,color:roleColors[params.value],size:\"small\"});}},{field:'is_active',headerName:'Estado',width:100,renderCell:params=>/*#__PURE__*/_jsx(Chip,{label:params.value?'Activo':'Inactivo',color:params.value?'success':'default',size:\"small\"})},{field:'created_at',headerName:'Fecha Creación',width:150,valueFormatter:params=>format(new Date(params.value),'dd/MM/yyyy')},{field:'actions',headerName:'Acciones',width:120,sortable:false,renderCell:params=>/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleEdit(params.row),color:\"primary\",children:/*#__PURE__*/_jsx(Edit,{})}),params.row.id!==(currentUser===null||currentUser===void 0?void 0:currentUser.id)&&/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleDelete(params.row.id),color:\"error\",children:/*#__PURE__*/_jsx(Delete,{})})]})}];const handleEdit=user=>{setSelectedUser(user);setValue('username',user.username);setValue('email',user.email);setValue('first_name',user.first_name);setValue('last_name',user.last_name);setValue('role',user.role);setValue('is_active',user.is_active);setOpenDialog(true);};const handleDelete=async id=>{if(window.confirm('¿Está seguro de desactivar este usuario?')){deleteMutation.mutate(id);}};const onSubmit=data=>{const{confirmPassword,...userData}=data;if(selectedUser){updateMutation.mutate({id:selectedUser.id,data:userData});}else{createMutation.mutate(userData);}};const handleCloseDialog=()=>{setOpenDialog(false);setSelectedUser(null);reset();};if((currentUser===null||currentUser===void 0?void 0:currentUser.role)!=='admin'){return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"Acceso denegado: Se requieren permisos de administrador para ver esta p\\xE1gina.\"})});}if(error){var _response,_response$data;return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsxs(Alert,{severity:\"error\",children:[\"Error al cargar usuarios: \",(error===null||error===void 0?void 0:(_response=error.response)===null||_response===void 0?void 0:(_response$data=_response.data)===null||_response$data===void 0?void 0:_response$data.error)||'Error desconocido']})});}return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Gesti\\xF3n de Usuarios\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",gap:2,children:[/*#__PURE__*/_jsx(IconButton,{onClick:()=>queryClient.invalidateQueries({queryKey:['users']}),children:/*#__PURE__*/_jsx(Refresh,{})}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(PersonAdd,{}),onClick:()=>setOpenDialog(true),children:\"Nuevo Usuario\"})]})]}),/*#__PURE__*/_jsx(Paper,{sx:{height:600,width:'100%'},children:/*#__PURE__*/_jsx(DataGrid,{rows:(data===null||data===void 0?void 0:data.users)||[],columns:columns,loading:isLoading,pageSizeOptions:[10,25,50],initialState:{pagination:{paginationModel:{pageSize:25}}},checkboxSelection:true,disableRowSelectionOnClick:true,sx:{'& .MuiDataGrid-cell:hover':{color:'primary.main'}}})}),/*#__PURE__*/_jsx(Dialog,{open:openDialog,onClose:handleCloseDialog,maxWidth:\"md\",fullWidth:true,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(DialogTitle,{children:selectedUser?'Editar Usuario':'Nuevo Usuario'}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,sx:{mt:1},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Usuario\",...register('username',{required:'El usuario es requerido'}),error:!!errors.username,helperText:(_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.message})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Email\",type:\"email\",...register('email',{required:'El email es requerido',pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:'Email inválido'}}),error:!!errors.email,helperText:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Nombre\",...register('first_name',{required:'El nombre es requerido'}),error:!!errors.first_name,helperText:(_errors$first_name=errors.first_name)===null||_errors$first_name===void 0?void 0:_errors$first_name.message})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Apellido\",...register('last_name',{required:'El apellido es requerido'}),error:!!errors.last_name,helperText:(_errors$last_name=errors.last_name)===null||_errors$last_name===void 0?void 0:_errors$last_name.message})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,label:\"Rol\",select:true,defaultValue:\"user\",...register('role',{required:'El rol es requerido'}),error:!!errors.role,helperText:(_errors$role=errors.role)===null||_errors$role===void 0?void 0:_errors$role.message,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"admin\",children:\"Administrador\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"user\",children:\"Usuario\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"viewer\",children:\"Visualizador\"})]})}),selectedUser&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(FormControlLabel,{control:/*#__PURE__*/_jsx(Switch,{...register('is_active'),defaultChecked:selectedUser.is_active}),label:\"Usuario Activo\"})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:selectedUser?'Nueva Contraseña (opcional)':'Contraseña',type:\"password\",...register('password',{required:!selectedUser?'La contraseña es requerida':false,minLength:{value:6,message:'La contraseña debe tener al menos 6 caracteres'}}),error:!!errors.password,helperText:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Confirmar Contrase\\xF1a\",type:\"password\",...register('confirmPassword',{validate:(value,_ref2)=>{let{password}=_ref2;if(!selectedUser&&!value)return'Confirme la contraseña';if(password&&value!==password)return'Las contraseñas no coinciden';return true;}}),error:!!errors.confirmPassword,helperText:(_errors$confirmPasswo=errors.confirmPassword)===null||_errors$confirmPasswo===void 0?void 0:_errors$confirmPasswo.message})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDialog,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:createMutation.isPending||updateMutation.isPending,children:selectedUser?'Actualizar':'Crear'})]})]})})]});}","map":{"version":3,"names":["React","useState","Box","Button","Paper","Typography","IconButton","Chip","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Grid","MenuItem","Alert","Switch","FormControlLabel","DataGrid","Edit","Delete","PersonAdd","Refresh","useQuery","useMutation","useQueryClient","useForm","format","usersService","useAuth","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Users","_errors$username","_errors$email","_errors$first_name","_errors$last_name","_errors$role","_errors$password","_errors$confirmPasswo","openDialog","setOpenDialog","selectedUser","setSelectedUser","queryClient","user","currentUser","data","isLoading","error","queryKey","queryFn","getUsers","createMutation","mutationFn","createUser","onSuccess","invalidateQueries","reset","updateMutation","_ref","id","updateUser","deleteMutation","deleteUser","register","handleSubmit","setValue","formState","errors","columns","field","headerName","width","flex","minWidth","valueGetter","params","row","first_name","last_name","renderCell","roleColors","admin","viewer","label","value","color","size","valueFormatter","Date","sortable","children","onClick","handleEdit","handleDelete","username","email","role","is_active","window","confirm","mutate","onSubmit","confirmPassword","userData","handleCloseDialog","severity","_response","_response$data","response","display","justifyContent","alignItems","mb","variant","gap","startIcon","sx","height","rows","users","loading","pageSizeOptions","initialState","pagination","paginationModel","pageSize","checkboxSelection","disableRowSelectionOnClick","open","onClose","maxWidth","fullWidth","container","spacing","mt","item","xs","sm","required","helperText","message","type","pattern","select","defaultValue","control","defaultChecked","minLength","password","validate","_ref2","disabled","isPending"],"sources":["C:/Users/Mariana/Documents/Inventario v1/inventory-app/frontend/src/pages/Users.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Box,\n  Button,\n  Paper,\n  Typography,\n  IconButton,\n  Chip,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Grid,\n  MenuItem,\n  Alert,\n  Switch,\n  FormControlLabel,\n} from '@mui/material';\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\nimport {\n  Add,\n  Edit,\n  Delete,\n  PersonAdd,\n  Refresh,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useForm } from 'react-hook-form';\nimport { format } from 'date-fns';\nimport { usersService } from '../services/users.service';\nimport { User } from '../types';\nimport { useAuth } from '../contexts/AuthContext';\n\nexport default function Users() {\n  const [openDialog, setOpenDialog] = useState(false);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const queryClient = useQueryClient();\n  const { user: currentUser } = useAuth();\n\n  const { data, isLoading, error } = useQuery({\n    queryKey: ['users'],\n    queryFn: () => usersService.getUsers(),\n  });\n\n  const createMutation = useMutation({\n    mutationFn: usersService.createUser,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['users'] });\n      setOpenDialog(false);\n      reset();\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: ({ id, data }: { id: string; data: Partial<User & { password?: string }> }) =>\n      usersService.updateUser(id, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['users'] });\n      setOpenDialog(false);\n      setSelectedUser(null);\n      reset();\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: usersService.deleteUser,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['users'] });\n    },\n  });\n\n  const {\n    register,\n    handleSubmit,\n    reset,\n    setValue,\n    formState: { errors },\n  } = useForm<Partial<User & { password?: string; confirmPassword?: string }>>();\n\n  const columns: GridColDef[] = [\n    { field: 'username', headerName: 'Usuario', width: 120 },\n    { field: 'email', headerName: 'Email', flex: 1, minWidth: 200 },\n    {\n      field: 'full_name',\n      headerName: 'Nombre Completo',\n      width: 200,\n      valueGetter: (params) => `${params.row.first_name} ${params.row.last_name}`,\n    },\n    {\n      field: 'role',\n      headerName: 'Rol',\n      width: 100,\n      renderCell: (params) => {\n        const roleColors = {\n          admin: 'error',\n          user: 'primary',\n          viewer: 'secondary',\n        };\n        return (\n          <Chip\n            label={params.value}\n            color={roleColors[params.value as keyof typeof roleColors] as any}\n            size=\"small\"\n          />\n        );\n      },\n    },\n    {\n      field: 'is_active',\n      headerName: 'Estado',\n      width: 100,\n      renderCell: (params) => (\n        <Chip\n          label={params.value ? 'Activo' : 'Inactivo'}\n          color={params.value ? 'success' : 'default'}\n          size=\"small\"\n        />\n      ),\n    },\n    {\n      field: 'created_at',\n      headerName: 'Fecha Creación',\n      width: 150,\n      valueFormatter: (params) =>\n        format(new Date(params.value), 'dd/MM/yyyy'),\n    },\n    {\n      field: 'actions',\n      headerName: 'Acciones',\n      width: 120,\n      sortable: false,\n      renderCell: (params) => (\n        <>\n          <IconButton\n            size=\"small\"\n            onClick={() => handleEdit(params.row)}\n            color=\"primary\"\n          >\n            <Edit />\n          </IconButton>\n          {params.row.id !== currentUser?.id && (\n            <IconButton\n              size=\"small\"\n              onClick={() => handleDelete(params.row.id)}\n              color=\"error\"\n            >\n              <Delete />\n            </IconButton>\n          )}\n        </>\n      ),\n    },\n  ];\n\n  const handleEdit = (user: User) => {\n    setSelectedUser(user);\n    setValue('username', user.username);\n    setValue('email', user.email);\n    setValue('first_name', user.first_name);\n    setValue('last_name', user.last_name);\n    setValue('role', user.role);\n    setValue('is_active', user.is_active);\n    setOpenDialog(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (window.confirm('¿Está seguro de desactivar este usuario?')) {\n      deleteMutation.mutate(id);\n    }\n  };\n\n  const onSubmit = (data: Partial<User & { password?: string; confirmPassword?: string }>) => {\n    const { confirmPassword, ...userData } = data;\n    \n    if (selectedUser) {\n      updateMutation.mutate({ id: selectedUser.id, data: userData });\n    } else {\n      createMutation.mutate(userData as any);\n    }\n  };\n\n  const handleCloseDialog = () => {\n    setOpenDialog(false);\n    setSelectedUser(null);\n    reset();\n  };\n\n  if (currentUser?.role !== 'admin') {\n    return (\n      <Box>\n        <Alert severity=\"error\">\n          Acceso denegado: Se requieren permisos de administrador para ver esta página.\n        </Alert>\n      </Box>\n    );\n  }\n\n  if (error) {\n    return (\n      <Box>\n        <Alert severity=\"error\">\n          Error al cargar usuarios: {(error as any)?.response?.data?.error || 'Error desconocido'}\n        </Alert>\n      </Box>\n    );\n  }\n\n  return (\n    <Box>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\n        <Typography variant=\"h4\">Gestión de Usuarios</Typography>\n        <Box display=\"flex\" gap={2}>\n          <IconButton\n            onClick={() => queryClient.invalidateQueries({ queryKey: ['users'] })}\n          >\n            <Refresh />\n          </IconButton>\n          <Button\n            variant=\"contained\"\n            startIcon={<PersonAdd />}\n            onClick={() => setOpenDialog(true)}\n          >\n            Nuevo Usuario\n          </Button>\n        </Box>\n      </Box>\n\n      <Paper sx={{ height: 600, width: '100%' }}>\n        <DataGrid\n          rows={data?.users || []}\n          columns={columns}\n          loading={isLoading}\n          pageSizeOptions={[10, 25, 50]}\n          initialState={{\n            pagination: {\n              paginationModel: { pageSize: 25 },\n            },\n          }}\n          checkboxSelection\n          disableRowSelectionOnClick\n          sx={{\n            '& .MuiDataGrid-cell:hover': {\n              color: 'primary.main',\n            },\n          }}\n        />\n      </Paper>\n\n      <Dialog open={openDialog} onClose={handleCloseDialog} maxWidth=\"md\" fullWidth>\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <DialogTitle>\n            {selectedUser ? 'Editar Usuario' : 'Nuevo Usuario'}\n          </DialogTitle>\n          <DialogContent>\n            <Grid container spacing={2} sx={{ mt: 1 }}>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Usuario\"\n                  {...register('username', { required: 'El usuario es requerido' })}\n                  error={!!errors.username}\n                  helperText={errors.username?.message}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Email\"\n                  type=\"email\"\n                  {...register('email', { \n                    required: 'El email es requerido',\n                    pattern: {\n                      value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                      message: 'Email inválido'\n                    }\n                  })}\n                  error={!!errors.email}\n                  helperText={errors.email?.message}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Nombre\"\n                  {...register('first_name', { required: 'El nombre es requerido' })}\n                  error={!!errors.first_name}\n                  helperText={errors.first_name?.message}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Apellido\"\n                  {...register('last_name', { required: 'El apellido es requerido' })}\n                  error={!!errors.last_name}\n                  helperText={errors.last_name?.message}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Rol\"\n                  select\n                  defaultValue=\"user\"\n                  {...register('role', { required: 'El rol es requerido' })}\n                  error={!!errors.role}\n                  helperText={errors.role?.message}\n                >\n                  <MenuItem value=\"admin\">Administrador</MenuItem>\n                  <MenuItem value=\"user\">Usuario</MenuItem>\n                  <MenuItem value=\"viewer\">Visualizador</MenuItem>\n                </TextField>\n              </Grid>\n              {selectedUser && (\n                <Grid item xs={12} sm={6}>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        {...register('is_active')}\n                        defaultChecked={selectedUser.is_active}\n                      />\n                    }\n                    label=\"Usuario Activo\"\n                  />\n                </Grid>\n              )}\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label={selectedUser ? 'Nueva Contraseña (opcional)' : 'Contraseña'}\n                  type=\"password\"\n                  {...register('password', { \n                    required: !selectedUser ? 'La contraseña es requerida' : false,\n                    minLength: {\n                      value: 6,\n                      message: 'La contraseña debe tener al menos 6 caracteres'\n                    }\n                  })}\n                  error={!!errors.password}\n                  helperText={errors.password?.message}\n                />\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Confirmar Contraseña\"\n                  type=\"password\"\n                  {...register('confirmPassword', {\n                    validate: (value, { password }) => {\n                      if (!selectedUser && !value) return 'Confirme la contraseña';\n                      if (password && value !== password) return 'Las contraseñas no coinciden';\n                      return true;\n                    }\n                  })}\n                  error={!!errors.confirmPassword}\n                  helperText={errors.confirmPassword?.message}\n                />\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleCloseDialog}>Cancelar</Button>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              disabled={createMutation.isPending || updateMutation.isPending}\n            >\n              {selectedUser ? 'Actualizar' : 'Crear'}\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </Box>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}