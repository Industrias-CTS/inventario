{"ast":null,"code":"import React,{useState}from'react';import{Box,Button,Paper,Typography,Tabs,Tab,Dialog,DialogTitle,DialogContent,DialogActions,TextField,Grid,MenuItem,Chip,Alert}from'@mui/material';import{DataGrid}from'@mui/x-data-grid';import{DatePicker}from'@mui/x-date-pickers/DatePicker';import{Add,ArrowUpward,ArrowDownward,BookmarkAdd}from'@mui/icons-material';import{useQuery,useMutation,useQueryClient}from'@tanstack/react-query';import{useForm,Controller}from'react-hook-form';import{format}from'date-fns';import{movementsService}from'../services/movements.service';import{componentsService}from'../services/components.service';import{movementTypesService}from'../services/movement-types.service';// import { Movement, Reservation } from '../types';\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function TabPanel(props){const{children,value,index,...other}=props;return/*#__PURE__*/_jsx(\"div\",{role:\"tabpanel\",hidden:value!==index,id:`simple-tabpanel-${index}`,\"aria-labelledby\":`simple-tab-${index}`,...other,children:value===index&&/*#__PURE__*/_jsx(Box,{sx:{py:3},children:children})});}export default function Movements(){var _movementErrors$movem,_movementErrors$compo,_movementErrors$quant,_reservationErrors$co,_reservationErrors$qu;const[tabValue,setTabValue]=useState(0);const[openMovementDialog,setOpenMovementDialog]=useState(false);const[openReservationDialog,setOpenReservationDialog]=useState(false);// const [selectedComponent, setSelectedComponent] = useState<string>('');\nconst queryClient=useQueryClient();const{data:movementsData,isLoading:movementsLoading}=useQuery({queryKey:['movements'],queryFn:()=>movementsService.getMovements()});const{data:reservationsData,isLoading:reservationsLoading}=useQuery({queryKey:['reservations'],queryFn:()=>movementsService.getReservations()});const{data:componentsData}=useQuery({queryKey:['components-list'],queryFn:()=>componentsService.getComponents()});const{data:movementTypesData}=useQuery({queryKey:['movement-types'],queryFn:()=>movementTypesService.getMovementTypes()});const createMovementMutation=useMutation({mutationFn:movementsService.createMovement,onSuccess:()=>{queryClient.invalidateQueries({queryKey:['movements']});queryClient.invalidateQueries({queryKey:['components']});setOpenMovementDialog(false);resetMovement();}});const createReservationMutation=useMutation({mutationFn:movementsService.createReservation,onSuccess:()=>{queryClient.invalidateQueries({queryKey:['reservations']});queryClient.invalidateQueries({queryKey:['components']});setOpenReservationDialog(false);resetReservation();}});const{register:registerMovement,handleSubmit:handleSubmitMovement,reset:resetMovement,// control: controlMovement,\nwatch:watchMovement,formState:{errors:movementErrors}}=useForm();const{register:registerReservation,handleSubmit:handleSubmitReservation,reset:resetReservation,control:controlReservation,formState:{errors:reservationErrors}}=useForm();// Watch form values para validaciÃ³n en tiempo real\nconst selectedComponentId=watchMovement('component_id');const selectedMovementTypeId=watchMovement('movement_type_id');// const enteredQuantity = watchMovement('quantity');\n// Obtener componente seleccionado\nconst selectedComponentData=componentsData===null||componentsData===void 0?void 0:componentsData.components.find(c=>c.id===selectedComponentId);// Obtener tipo de movimiento seleccionado\nconst selectedMovementType=movementTypesData===null||movementTypesData===void 0?void 0:movementTypesData.movementTypes.find(mt=>mt.id===selectedMovementTypeId);const movementColumns=[{field:'created_at',headerName:'Fecha',width:150,valueFormatter:params=>format(new Date(params.value),'dd/MM/yyyy HH:mm')},{field:'movement_type_name',headerName:'Tipo',width:150,renderCell:params=>{const operation=params.row.operation;const color=operation==='IN'?'success':'error';const icon=operation==='IN'?/*#__PURE__*/_jsx(ArrowDownward,{}):/*#__PURE__*/_jsx(ArrowUpward,{});return/*#__PURE__*/_jsx(Chip,{label:params.value,color:color,size:\"small\",icon:icon});}},{field:'component_name',headerName:'Componente',flex:1,minWidth:200},{field:'quantity',headerName:'Cantidad',width:100,type:'number'},{field:'unit_cost',headerName:'Costo Unit.',width:100,type:'number'},{field:'total_cost',headerName:'Costo Total',width:120,type:'number'},{field:'reference_number',headerName:'Referencia',width:150},{field:'user',headerName:'Usuario',width:150,valueGetter:params=>params.row.username||`${params.row.first_name} ${params.row.last_name}`}];const reservationColumns=[{field:'reserved_at',headerName:'Fecha Reserva',width:150,valueFormatter:params=>format(new Date(params.value),'dd/MM/yyyy HH:mm')},{field:'component_name',headerName:'Componente',flex:1,minWidth:200},{field:'quantity',headerName:'Cantidad',width:100,type:'number'},{field:'status',headerName:'Estado',width:120,renderCell:params=>{const statusColors={active:'warning',completed:'success',cancelled:'error'};return/*#__PURE__*/_jsx(Chip,{label:params.value,color:statusColors[params.value],size:\"small\"});}},{field:'reference',headerName:'Referencia',width:150},{field:'expires_at',headerName:'Expira',width:150,valueFormatter:params=>params.value?format(new Date(params.value),'dd/MM/yyyy'):'-'},{field:'user',headerName:'Reservado por',width:150,valueGetter:params=>params.row.username||`${params.row.first_name} ${params.row.last_name}`}];const onSubmitMovement=data=>{createMovementMutation.mutate(data);};const onSubmitReservation=data=>{createReservationMutation.mutate(data);};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",alignItems:\"center\",mb:3,children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Movimientos de Inventario\"}),/*#__PURE__*/_jsxs(Box,{display:\"flex\",gap:2,children:[/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(Add,{}),onClick:()=>setOpenMovementDialog(true),children:\"Nuevo Movimiento\"}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(BookmarkAdd,{}),onClick:()=>setOpenReservationDialog(true),children:\"Nueva Reserva\"})]})]}),/*#__PURE__*/_jsxs(Paper,{sx:{width:'100%'},children:[/*#__PURE__*/_jsxs(Tabs,{value:tabValue,onChange:(e,v)=>setTabValue(v),children:[/*#__PURE__*/_jsx(Tab,{label:\"Movimientos\"}),/*#__PURE__*/_jsx(Tab,{label:\"Reservas\"})]}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:0,children:/*#__PURE__*/_jsx(DataGrid,{rows:(movementsData===null||movementsData===void 0?void 0:movementsData.movements)||[],columns:movementColumns,loading:movementsLoading,autoHeight:true,pageSizeOptions:[10,25,50],initialState:{pagination:{paginationModel:{pageSize:25}},sorting:{sortModel:[{field:'created_at',sort:'desc'}]}},sx:{'& .MuiDataGrid-cell:hover':{color:'primary.main'}}})}),/*#__PURE__*/_jsx(TabPanel,{value:tabValue,index:1,children:/*#__PURE__*/_jsx(DataGrid,{rows:(reservationsData===null||reservationsData===void 0?void 0:reservationsData.reservations)||[],columns:reservationColumns,loading:reservationsLoading,autoHeight:true,pageSizeOptions:[10,25,50],initialState:{pagination:{paginationModel:{pageSize:25}},sorting:{sortModel:[{field:'reserved_at',sort:'desc'}]}},sx:{'& .MuiDataGrid-cell:hover':{color:'primary.main'}}})})]}),/*#__PURE__*/_jsx(Dialog,{open:openMovementDialog,onClose:()=>setOpenMovementDialog(false),maxWidth:\"sm\",fullWidth:true,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitMovement(onSubmitMovement),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Nuevo Movimiento\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,sx:{mt:1},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,label:\"Tipo de Movimiento\",select:true,...registerMovement('movement_type_id',{required:'El tipo de movimiento es requerido'}),error:!!movementErrors.movement_type_id,helperText:(_movementErrors$movem=movementErrors.movement_type_id)===null||_movementErrors$movem===void 0?void 0:_movementErrors$movem.message,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"Seleccionar...\"}),movementTypesData===null||movementTypesData===void 0?void 0:movementTypesData.movementTypes.map(type=>/*#__PURE__*/_jsxs(MenuItem,{value:type.id,children:[type.name,\" (\",type.operation,\")\"]},type.id))]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,label:\"Componente\",select:true,...registerMovement('component_id',{required:'El componente es requerido'}),error:!!movementErrors.component_id,helperText:(_movementErrors$compo=movementErrors.component_id)===null||_movementErrors$compo===void 0?void 0:_movementErrors$compo.message,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"Seleccionar...\"}),componentsData===null||componentsData===void 0?void 0:componentsData.components.map(component=>{const availableStock=component.current_stock-component.reserved_stock;return/*#__PURE__*/_jsxs(MenuItem,{value:component.id,children:[component.name,\" - \",component.code,\" (Disponible: \",availableStock,\")\"]},component.id);})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Cantidad\",type:\"number\",...registerMovement('quantity',{required:'La cantidad es requerida',min:{value:0.01,message:'La cantidad debe ser mayor a 0'},validate:value=>{if((selectedMovementType===null||selectedMovementType===void 0?void 0:selectedMovementType.operation)==='OUT'&&selectedComponentData){const availableStock=selectedComponentData.current_stock-selectedComponentData.reserved_stock;if(parseFloat(value)>availableStock){return`Stock insuficiente. Disponible: ${availableStock} unidades`;}}return true;}}),error:!!movementErrors.quantity,helperText:(_movementErrors$quant=movementErrors.quantity)===null||_movementErrors$quant===void 0?void 0:_movementErrors$quant.message})}),(selectedMovementType===null||selectedMovementType===void 0?void 0:selectedMovementType.operation)==='OUT'&&selectedComponentData&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(Alert,{severity:selectedComponentData.current_stock-selectedComponentData.reserved_stock<=0?'error':selectedComponentData.current_stock-selectedComponentData.reserved_stock<=selectedComponentData.min_stock?'warning':'info',sx:{mt:1},children:[/*#__PURE__*/_jsx(\"strong\",{children:selectedComponentData.name}),/*#__PURE__*/_jsx(\"br\",{}),\"Stock actual: \",selectedComponentData.current_stock,\" | Stock reservado: \",selectedComponentData.reserved_stock,\" |\",/*#__PURE__*/_jsxs(\"strong\",{children:[\" Disponible: \",selectedComponentData.current_stock-selectedComponentData.reserved_stock]}),selectedComponentData.current_stock-selectedComponentData.reserved_stock<=selectedComponentData.min_stock&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'orange'},children:[\"\\u26A0\\uFE0F Stock por debajo del m\\xEDnimo (\",selectedComponentData.min_stock,\")\"]})]})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Costo Unitario\",type:\"number\",...registerMovement('unit_cost',{min:0})})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"N\\xFAmero de Referencia\",...registerMovement('reference_number')})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Notas\",multiline:true,rows:2,...registerMovement('notes')})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenMovementDialog(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:createMovementMutation.isPending,children:\"Crear Movimiento\"})]})]})}),/*#__PURE__*/_jsx(Dialog,{open:openReservationDialog,onClose:()=>setOpenReservationDialog(false),maxWidth:\"sm\",fullWidth:true,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmitReservation(onSubmitReservation),children:[/*#__PURE__*/_jsx(DialogTitle,{children:\"Nueva Reserva\"}),/*#__PURE__*/_jsx(DialogContent,{children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,sx:{mt:1},children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,label:\"Componente\",select:true,...registerReservation('component_id',{required:'El componente es requerido'}),error:!!reservationErrors.component_id,helperText:(_reservationErrors$co=reservationErrors.component_id)===null||_reservationErrors$co===void 0?void 0:_reservationErrors$co.message,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:\"Seleccionar...\"}),componentsData===null||componentsData===void 0?void 0:componentsData.components.map(component=>/*#__PURE__*/_jsxs(MenuItem,{value:component.id,children:[component.name,\" - Stock disponible: \",component.current_stock-component.reserved_stock]},component.id))]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Cantidad\",type:\"number\",...registerReservation('quantity',{required:'La cantidad es requerida',min:{value:0.01,message:'La cantidad debe ser mayor a 0'}}),error:!!reservationErrors.quantity,helperText:(_reservationErrors$qu=reservationErrors.quantity)===null||_reservationErrors$qu===void 0?void 0:_reservationErrors$qu.message})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Referencia\",...registerReservation('reference')})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Controller,{name:\"expires_at\",control:controlReservation,render:_ref=>{let{field}=_ref;return/*#__PURE__*/_jsx(DatePicker,{label:\"Fecha de Expiraci\\xF3n\",slotProps:{textField:{fullWidth:true}},...field});}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Notas\",multiline:true,rows:2,...registerReservation('notes')})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:()=>setOpenReservationDialog(false),children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:createReservationMutation.isPending,children:\"Crear Reserva\"})]})]})})]});}","map":{"version":3,"names":["React","useState","Box","Button","Paper","Typography","Tabs","Tab","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Grid","MenuItem","Chip","Alert","DataGrid","DatePicker","Add","ArrowUpward","ArrowDownward","BookmarkAdd","useQuery","useMutation","useQueryClient","useForm","Controller","format","movementsService","componentsService","movementTypesService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TabPanel","props","children","value","index","other","role","hidden","id","sx","py","Movements","_movementErrors$movem","_movementErrors$compo","_movementErrors$quant","_reservationErrors$co","_reservationErrors$qu","tabValue","setTabValue","openMovementDialog","setOpenMovementDialog","openReservationDialog","setOpenReservationDialog","queryClient","data","movementsData","isLoading","movementsLoading","queryKey","queryFn","getMovements","reservationsData","reservationsLoading","getReservations","componentsData","getComponents","movementTypesData","getMovementTypes","createMovementMutation","mutationFn","createMovement","onSuccess","invalidateQueries","resetMovement","createReservationMutation","createReservation","resetReservation","register","registerMovement","handleSubmit","handleSubmitMovement","reset","watch","watchMovement","formState","errors","movementErrors","registerReservation","handleSubmitReservation","control","controlReservation","reservationErrors","selectedComponentId","selectedMovementTypeId","selectedComponentData","components","find","c","selectedMovementType","movementTypes","mt","movementColumns","field","headerName","width","valueFormatter","params","Date","renderCell","operation","row","color","icon","label","size","flex","minWidth","type","valueGetter","username","first_name","last_name","reservationColumns","statusColors","active","completed","cancelled","onSubmitMovement","mutate","onSubmitReservation","display","justifyContent","alignItems","mb","variant","gap","startIcon","onClick","onChange","e","v","rows","movements","columns","loading","autoHeight","pageSizeOptions","initialState","pagination","paginationModel","pageSize","sorting","sortModel","sort","reservations","open","onClose","maxWidth","fullWidth","onSubmit","container","spacing","item","xs","select","required","error","movement_type_id","helperText","message","map","name","component_id","component","availableStock","current_stock","reserved_stock","code","sm","min","validate","parseFloat","quantity","severity","min_stock","style","multiline","disabled","isPending","render","_ref","slotProps","textField"],"sources":["C:/Users/Mariana/Documents/Inventario v1/inventory-app/frontend/src/pages/Movements.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport {\n  Box,\n  Button,\n  Paper,\n  Typography,\n  Tabs,\n  Tab,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  TextField,\n  Grid,\n  MenuItem,\n  Chip,\n  Alert,\n} from '@mui/material';\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport {\n  Add,\n  ArrowUpward,\n  ArrowDownward,\n  BookmarkAdd,\n} from '@mui/icons-material';\nimport { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\nimport { useForm, Controller } from 'react-hook-form';\nimport { format } from 'date-fns';\nimport { movementsService } from '../services/movements.service';\nimport { componentsService } from '../services/components.service';\nimport { movementTypesService } from '../services/movement-types.service';\n// import { Movement, Reservation } from '../types';\n\ninterface TabPanelProps {\n  children?: React.ReactNode;\n  index: number;\n  value: number;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ py: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nexport default function Movements() {\n  const [tabValue, setTabValue] = useState(0);\n  const [openMovementDialog, setOpenMovementDialog] = useState(false);\n  const [openReservationDialog, setOpenReservationDialog] = useState(false);\n  // const [selectedComponent, setSelectedComponent] = useState<string>('');\n  const queryClient = useQueryClient();\n\n  const { data: movementsData, isLoading: movementsLoading } = useQuery({\n    queryKey: ['movements'],\n    queryFn: () => movementsService.getMovements(),\n  });\n\n  const { data: reservationsData, isLoading: reservationsLoading } = useQuery({\n    queryKey: ['reservations'],\n    queryFn: () => movementsService.getReservations(),\n  });\n\n  const { data: componentsData } = useQuery({\n    queryKey: ['components-list'],\n    queryFn: () => componentsService.getComponents(),\n  });\n\n  const { data: movementTypesData } = useQuery({\n    queryKey: ['movement-types'],\n    queryFn: () => movementTypesService.getMovementTypes(),\n  });\n\n  const createMovementMutation = useMutation({\n    mutationFn: movementsService.createMovement,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['movements'] });\n      queryClient.invalidateQueries({ queryKey: ['components'] });\n      setOpenMovementDialog(false);\n      resetMovement();\n    },\n  });\n\n  const createReservationMutation = useMutation({\n    mutationFn: movementsService.createReservation,\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['reservations'] });\n      queryClient.invalidateQueries({ queryKey: ['components'] });\n      setOpenReservationDialog(false);\n      resetReservation();\n    },\n  });\n\n  const {\n    register: registerMovement,\n    handleSubmit: handleSubmitMovement,\n    reset: resetMovement,\n    // control: controlMovement,\n    watch: watchMovement,\n    formState: { errors: movementErrors },\n  } = useForm();\n\n  const {\n    register: registerReservation,\n    handleSubmit: handleSubmitReservation,\n    reset: resetReservation,\n    control: controlReservation,\n    formState: { errors: reservationErrors },\n  } = useForm();\n\n  // Watch form values para validaciÃ³n en tiempo real\n  const selectedComponentId = watchMovement('component_id');\n  const selectedMovementTypeId = watchMovement('movement_type_id');\n  // const enteredQuantity = watchMovement('quantity');\n\n  // Obtener componente seleccionado\n  const selectedComponentData = componentsData?.components.find(c => c.id === selectedComponentId);\n  \n  // Obtener tipo de movimiento seleccionado\n  const selectedMovementType = movementTypesData?.movementTypes.find(mt => mt.id === selectedMovementTypeId);\n\n  const movementColumns: GridColDef[] = [\n    {\n      field: 'created_at',\n      headerName: 'Fecha',\n      width: 150,\n      valueFormatter: (params) =>\n        format(new Date(params.value), 'dd/MM/yyyy HH:mm'),\n    },\n    {\n      field: 'movement_type_name',\n      headerName: 'Tipo',\n      width: 150,\n      renderCell: (params) => {\n        const operation = params.row.operation;\n        const color = operation === 'IN' ? 'success' : 'error';\n        const icon = operation === 'IN' ? <ArrowDownward /> : <ArrowUpward />;\n        return (\n          <Chip\n            label={params.value}\n            color={color}\n            size=\"small\"\n            icon={icon}\n          />\n        );\n      },\n    },\n    { field: 'component_name', headerName: 'Componente', flex: 1, minWidth: 200 },\n    { field: 'quantity', headerName: 'Cantidad', width: 100, type: 'number' },\n    { field: 'unit_cost', headerName: 'Costo Unit.', width: 100, type: 'number' },\n    { field: 'total_cost', headerName: 'Costo Total', width: 120, type: 'number' },\n    { field: 'reference_number', headerName: 'Referencia', width: 150 },\n    {\n      field: 'user',\n      headerName: 'Usuario',\n      width: 150,\n      valueGetter: (params) =>\n        params.row.username || `${params.row.first_name} ${params.row.last_name}`,\n    },\n  ];\n\n  const reservationColumns: GridColDef[] = [\n    {\n      field: 'reserved_at',\n      headerName: 'Fecha Reserva',\n      width: 150,\n      valueFormatter: (params) =>\n        format(new Date(params.value), 'dd/MM/yyyy HH:mm'),\n    },\n    { field: 'component_name', headerName: 'Componente', flex: 1, minWidth: 200 },\n    { field: 'quantity', headerName: 'Cantidad', width: 100, type: 'number' },\n    {\n      field: 'status',\n      headerName: 'Estado',\n      width: 120,\n      renderCell: (params) => {\n        const statusColors = {\n          active: 'warning',\n          completed: 'success',\n          cancelled: 'error',\n        };\n        return (\n          <Chip\n            label={params.value}\n            color={statusColors[params.value as keyof typeof statusColors] as any}\n            size=\"small\"\n          />\n        );\n      },\n    },\n    { field: 'reference', headerName: 'Referencia', width: 150 },\n    {\n      field: 'expires_at',\n      headerName: 'Expira',\n      width: 150,\n      valueFormatter: (params) =>\n        params.value ? format(new Date(params.value), 'dd/MM/yyyy') : '-',\n    },\n    {\n      field: 'user',\n      headerName: 'Reservado por',\n      width: 150,\n      valueGetter: (params) =>\n        params.row.username || `${params.row.first_name} ${params.row.last_name}`,\n    },\n  ];\n\n  const onSubmitMovement = (data: any) => {\n    createMovementMutation.mutate(data);\n  };\n\n  const onSubmitReservation = (data: any) => {\n    createReservationMutation.mutate(data);\n  };\n\n  return (\n    <Box>\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\n        <Typography variant=\"h4\">Movimientos de Inventario</Typography>\n        <Box display=\"flex\" gap={2}>\n          <Button\n            variant=\"contained\"\n            startIcon={<Add />}\n            onClick={() => setOpenMovementDialog(true)}\n          >\n            Nuevo Movimiento\n          </Button>\n          <Button\n            variant=\"outlined\"\n            startIcon={<BookmarkAdd />}\n            onClick={() => setOpenReservationDialog(true)}\n          >\n            Nueva Reserva\n          </Button>\n        </Box>\n      </Box>\n\n      <Paper sx={{ width: '100%' }}>\n        <Tabs value={tabValue} onChange={(e, v) => setTabValue(v)}>\n          <Tab label=\"Movimientos\" />\n          <Tab label=\"Reservas\" />\n        </Tabs>\n\n        <TabPanel value={tabValue} index={0}>\n          <DataGrid\n            rows={movementsData?.movements || []}\n            columns={movementColumns}\n            loading={movementsLoading}\n            autoHeight\n            pageSizeOptions={[10, 25, 50]}\n            initialState={{\n              pagination: {\n                paginationModel: { pageSize: 25 },\n              },\n              sorting: {\n                sortModel: [{ field: 'created_at', sort: 'desc' }],\n              },\n            }}\n            sx={{\n              '& .MuiDataGrid-cell:hover': {\n                color: 'primary.main',\n              },\n            }}\n          />\n        </TabPanel>\n\n        <TabPanel value={tabValue} index={1}>\n          <DataGrid\n            rows={reservationsData?.reservations || []}\n            columns={reservationColumns}\n            loading={reservationsLoading}\n            autoHeight\n            pageSizeOptions={[10, 25, 50]}\n            initialState={{\n              pagination: {\n                paginationModel: { pageSize: 25 },\n              },\n              sorting: {\n                sortModel: [{ field: 'reserved_at', sort: 'desc' }],\n              },\n            }}\n            sx={{\n              '& .MuiDataGrid-cell:hover': {\n                color: 'primary.main',\n              },\n            }}\n          />\n        </TabPanel>\n      </Paper>\n\n      {/* Dialog para nuevo movimiento */}\n      <Dialog\n        open={openMovementDialog}\n        onClose={() => setOpenMovementDialog(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <form onSubmit={handleSubmitMovement(onSubmitMovement)}>\n          <DialogTitle>Nuevo Movimiento</DialogTitle>\n          <DialogContent>\n            <Grid container spacing={2} sx={{ mt: 1 }}>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Tipo de Movimiento\"\n                  select\n                  {...registerMovement('movement_type_id', {\n                    required: 'El tipo de movimiento es requerido',\n                  })}\n                  error={!!movementErrors.movement_type_id}\n                  helperText={movementErrors.movement_type_id?.message as string}\n                >\n                  <MenuItem value=\"\">Seleccionar...</MenuItem>\n                  {movementTypesData?.movementTypes.map((type) => (\n                    <MenuItem key={type.id} value={type.id}>\n                      {type.name} ({type.operation})\n                    </MenuItem>\n                  ))}\n                </TextField>\n              </Grid>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Componente\"\n                  select\n                  {...registerMovement('component_id', {\n                    required: 'El componente es requerido',\n                  })}\n                  error={!!movementErrors.component_id}\n                  helperText={movementErrors.component_id?.message as string}\n                >\n                  <MenuItem value=\"\">Seleccionar...</MenuItem>\n                  {componentsData?.components.map((component) => {\n                    const availableStock = component.current_stock - component.reserved_stock;\n                    return (\n                      <MenuItem key={component.id} value={component.id}>\n                        {component.name} - {component.code} (Disponible: {availableStock})\n                      </MenuItem>\n                    );\n                  })}\n                </TextField>\n              </Grid>\n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Cantidad\"\n                  type=\"number\"\n                  {...registerMovement('quantity', {\n                    required: 'La cantidad es requerida',\n                    min: { value: 0.01, message: 'La cantidad debe ser mayor a 0' },\n                    validate: (value) => {\n                      if (selectedMovementType?.operation === 'OUT' && selectedComponentData) {\n                        const availableStock = selectedComponentData.current_stock - selectedComponentData.reserved_stock;\n                        if (parseFloat(value) > availableStock) {\n                          return `Stock insuficiente. Disponible: ${availableStock} unidades`;\n                        }\n                      }\n                      return true;\n                    }\n                  })}\n                  error={!!movementErrors.quantity}\n                  helperText={movementErrors.quantity?.message as string}\n                />\n              </Grid>\n              \n              {/* Mostrar informaciÃ³n de stock para movimientos de salida */}\n              {selectedMovementType?.operation === 'OUT' && selectedComponentData && (\n                <Grid item xs={12}>\n                  <Alert \n                    severity={\n                      selectedComponentData.current_stock - selectedComponentData.reserved_stock <= 0 \n                        ? 'error' \n                        : selectedComponentData.current_stock - selectedComponentData.reserved_stock <= selectedComponentData.min_stock\n                        ? 'warning'\n                        : 'info'\n                    }\n                    sx={{ mt: 1 }}\n                  >\n                    <strong>{selectedComponentData.name}</strong>\n                    <br />\n                    Stock actual: {selectedComponentData.current_stock} | \n                    Stock reservado: {selectedComponentData.reserved_stock} | \n                    <strong> Disponible: {selectedComponentData.current_stock - selectedComponentData.reserved_stock}</strong>\n                    {selectedComponentData.current_stock - selectedComponentData.reserved_stock <= selectedComponentData.min_stock && (\n                      <>\n                        <br />\n                        <span style={{color: 'orange'}}>â ï¸ Stock por debajo del mÃ­nimo ({selectedComponentData.min_stock})</span>\n                      </>\n                    )}\n                  </Alert>\n                </Grid>\n              )}\n              \n              <Grid item xs={12} sm={6}>\n                <TextField\n                  fullWidth\n                  label=\"Costo Unitario\"\n                  type=\"number\"\n                  {...registerMovement('unit_cost', { min: 0 })}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"NÃºmero de Referencia\"\n                  {...registerMovement('reference_number')}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Notas\"\n                  multiline\n                  rows={2}\n                  {...registerMovement('notes')}\n                />\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setOpenMovementDialog(false)}>Cancelar</Button>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              disabled={createMovementMutation.isPending}\n            >\n              Crear Movimiento\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n\n      {/* Dialog para nueva reserva */}\n      <Dialog\n        open={openReservationDialog}\n        onClose={() => setOpenReservationDialog(false)}\n        maxWidth=\"sm\"\n        fullWidth\n      >\n        <form onSubmit={handleSubmitReservation(onSubmitReservation)}>\n          <DialogTitle>Nueva Reserva</DialogTitle>\n          <DialogContent>\n            <Grid container spacing={2} sx={{ mt: 1 }}>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Componente\"\n                  select\n                  {...registerReservation('component_id', {\n                    required: 'El componente es requerido',\n                  })}\n                  error={!!reservationErrors.component_id}\n                  helperText={reservationErrors.component_id?.message as string}\n                >\n                  <MenuItem value=\"\">Seleccionar...</MenuItem>\n                  {componentsData?.components.map((component) => (\n                    <MenuItem key={component.id} value={component.id}>\n                      {component.name} - Stock disponible: {component.current_stock - component.reserved_stock}\n                    </MenuItem>\n                  ))}\n                </TextField>\n              </Grid>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Cantidad\"\n                  type=\"number\"\n                  {...registerReservation('quantity', {\n                    required: 'La cantidad es requerida',\n                    min: { value: 0.01, message: 'La cantidad debe ser mayor a 0' },\n                  })}\n                  error={!!reservationErrors.quantity}\n                  helperText={reservationErrors.quantity?.message as string}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Referencia\"\n                  {...registerReservation('reference')}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <Controller\n                  name=\"expires_at\"\n                  control={controlReservation}\n                  render={({ field }) => (\n                    <DatePicker\n                      label=\"Fecha de ExpiraciÃ³n\"\n                      slotProps={{\n                        textField: {\n                          fullWidth: true,\n                        },\n                      }}\n                      {...field}\n                    />\n                  )}\n                />\n              </Grid>\n              <Grid item xs={12}>\n                <TextField\n                  fullWidth\n                  label=\"Notas\"\n                  multiline\n                  rows={2}\n                  {...registerReservation('notes')}\n                />\n              </Grid>\n            </Grid>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={() => setOpenReservationDialog(false)}>\n              Cancelar\n            </Button>\n            <Button\n              type=\"submit\"\n              variant=\"contained\"\n              disabled={createReservationMutation.isPending}\n            >\n              Crear Reserva\n            </Button>\n          </DialogActions>\n        </form>\n      </Dialog>\n    </Box>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}